% convert -delay 4 -loop 0 -density 400 -alpha remove wavenet.pdf wavenet.gif
\documentclass[multi=my]{standalone}
\usepackage{tikz}
\tikzset{>=latex}
\usepackage{ifthen}
\usepackage{intcalc}
\begin{document}
\foreach \i in {0, 1, ..., 43}{
%-0.3, -0.1, ..., 8.3
\begin{my}
\begin{tikzpicture}
%\node at (-3, 0) {Input};
%\node at (-3, 2) {Hidden};
%\node at (-3, 4) {Hidden};
%\node at (-3, 6) {Hidden};
%\node at (-3, 8) {Output};

\clip (-3+\i/44, -1) rectangle (16+\i/44, 9);

\draw[fill=blue!50!white] (15,0) circle [radius=0.25];
\draw[fill=black!50!white] (15, 2) circle [radius=0.25];
\draw[fill=black!50!white] (15, 4) circle [radius=0.25];
\draw[fill=black!50!white] (15, 6) circle [radius=0.25];
\draw[fill=orange!50!white] (15, 8) circle [radius=0.25];
\draw[->, line width=1.5] (15,0.3) -- (15, 1.7);
\draw[->, line width=1.5] (15,2.3) -- (15, 3.7);
\draw[->, line width=1.5] (15,4.3) -- (15, 5.7);
\draw[->, line width=1.5] (15,6.3) -- (15, 7.7);


\foreach \x in {0, 1, ..., 14}{
	\ifthenelse{\intcalcMod{\x}{2}=0}{
		\draw[->, line width=1.5] (\x+0.15,0.3) -- (\x+0.85, 1.7);
	}{
		\draw[->, line width=1.5] (\x,0.3) -- (\x, 1.7);
	}
	\ifthenelse{\intcalcMod{\x}{4}=1}{
		\draw[->, line width=1.5] (\x+0.3,2.3) -- (\x+1.7, 3.7);
	}{}
	\ifthenelse{\intcalcMod{\x}{4}=3}{
		\draw[->, line width=1.5] (\x,2.3) -- (\x, 3.7);
	}{}
	\ifthenelse{\intcalcMod{\x}{8}=3}{
		\draw[->, line width=1.5] (\x+0.3,4.3) -- (\x+3.7, 5.7);
	}{}
	\ifthenelse{\intcalcMod{\x}{8}=7}{
		\draw[->, line width=1.5] (\x,4.3) -- (\x, 5.7);
	}{}
	\ifthenelse{\intcalcMod{\x}{16}=7}{
		\draw[->, line width=1.5] (\x+0.3,6.3) -- (\x+7.7, 7.7);
	}{}
	\ifthenelse{\intcalcMod{\x}{16}=15}{
		\draw[->, line width=1.5] (\x,6.3) -- (\x, 7.7);
	}{}
}

\fill[white] (0,0.2*\i-0.3) rectangle (16, 8.5);


\foreach \x in {-3, -2, -1, ..., 14}{
	\draw[fill=blue!50!white] (\x,0) circle [radius=0.25];
	\draw[fill=black!50!white] (\x, 2) circle [radius=0.25];
	\draw[fill=black!50!white] (\x, 4) circle [radius=0.25];
	\draw[fill=black!50!white] (\x, 6) circle [radius=0.25];
	\draw[fill=orange!50!white] (\x, 8) circle [radius=0.25];
}
\end{tikzpicture}
\end{my}
}
\end{document}
